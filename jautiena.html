<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jautienos u≈æsakymas | Pas Jurkus prie J≈´ros üèû</title>

  <meta name="description" content="U≈æsisakykite ≈°vie≈æiƒÖ jautienƒÖ tiesiai i≈° m≈´s≈≥ ≈´kio. Nat≈´raliai auginta, vietinƒó ir paruo≈°ta su r≈´pesƒçiu ‚Äì tikra ≈´kio kokybƒó J≈´s≈≥ stalui.">

  <meta property="og:url" content="https://pasjurkus.lt/jautiena.html">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Jautienos u≈æsakymas | Pas Jurkus prie J≈´ros üèû">
  <meta property="og:description" content="U≈æsisakykite ≈°vie≈æiƒÖ jautienƒÖ tiesiai i≈° m≈´s≈≥ ≈´kio.">
  <meta property="og:image" content="./img/og-image.png">

  <link rel="icon" type="image/png" href="./img/favicon/favicon-96x96.png" sizes="96x96">
  <meta name="theme-color" content="#fcb016">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Tagesschrift&display=swap" rel="stylesheet">

  <script src="https://kit.fontawesome.com/11da5eb453.js" crossorigin="anonymous"></script>

  <style>
    :root {
      --dark: rgb(63, 44, 7);
      --deep: rgb(252, 176, 22);
      --lighter: rgb(255, 254, 249);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: Inter, sans-serif;
      background: var(--lighter);
      color: var(--dark);
      min-height: 100vh;
    }

    header {
      text-align: center;
      padding: 1.5rem 1rem 1rem;
    }

    header img { width: 240px; }

    h1 {
      font-family: "Tagesschrift", system-ui;
      margin: 0.2rem 0;
    }

    main {
      padding: 0 1rem 9rem;
      max-width: 600px;
      margin: 0 auto;
    }

    .product {
      display: flex;
      justify-content: space-between;
      padding: 0.75rem 0;
      border-bottom: 1px solid #e5e5e5;
    }

    .product-info { flex: 1; }

    select {
      width: 80px;
      padding: 0.3rem;
      border-radius: 8px;
    }

    footer {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: var(--dark);
      text-align: center;
    }

    .orderBtn {
      width: 100%;
      padding: 0.9rem 0;
      color: var(--deep);
      background: none;
      border: none;
      cursor: pointer;
    }

    .orderBtn i {
      font-size: 26px;
      display: block;
    }

    .orderBtn span {
      font-size: 13px;
    }

    .loader {
      width: 32px;
      height: 32px;
      border: 4px solid rgba(0,0,0,0.15);
      border-top-color: #000;
      border-radius: 50%;
      animation: spin 0.9s linear infinite;
      margin: 2rem auto;
    }

    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>

<body>

<header>
  <a href="https://pasjurkus.lt/">
    <img src="https://pasjurkus.lt/img/logo-brown.png" alt="Jurk≈≥ ≈†eimos ≈™kis">
  </a>
  <h1>Jurk≈≥ ≈†eimos ≈™kis</h1>
  <h2>Jautienos u≈æsakymas</h2>
</header>

<main>
  <div id="products">
    <div id="loader" class="loader"></div>
  </div>
</main>

<footer>
  <button class="orderBtn" id="telegramOrder">
    <i class="fa-brands fa-telegram"></i>
    <span>U≈æsakyti per Telegram</span>
  </button>
</footer>

<script>
document.addEventListener('DOMContentLoaded', async () => {
  const container = document.getElementById('products');
  const response = await fetch(
    'https://script.google.com/macros/s/AKfycbwWDqiaUB1EeIBQ0wdvbLo0HpGDgPefcnMu5ehukmY3zFwQfmdfyW6dv1y5_kXb774Q3A/exec'
  );
  const products = await response.json();

  products.forEach(p => {
    const div = document.createElement('div');
    div.className = 'product';
    div.innerHTML = `
      <div class="product-info">
        <strong>${p.Name}</strong><br>
        <small>${p.Description}</small>
      </div>
      <select id="${p.SKU}">
        ${Array.from({ length: Number(p.Balance) + 1 }, (_, i) =>
          `<option value="${i}">${i}</option>`
        ).join('')}
      </select>
    `;
    container.appendChild(div);
  });

  document.getElementById('loader').remove();

  document.getElementById('telegramOrder').onclick = () => {
    const selected = products
      .map(p => {
        const v = Number(document.getElementById(p.SKU).value);
        return v > 0 ? `${p.Name}: ${v}` : null;
      })
      .filter(Boolean);

    if (!selected.length) {
      alert('Pasirinkite bent vienƒÖ produktƒÖ.');
      return;
    }

    const msg =
      'U≈æsakymas ' + generateOrderId() + '\n***\n' +
      selected.join('\n') + '\n***';

    window.location.href =
      'https://t.me/+37062804118?text=' + encodeURIComponent(msg);
  };
});

function generateOrderId() {
  const d = new Date();
  return (
    '#' +
    (d.getFullYear() % 100).toString(36).toUpperCase() +
    (d.getMonth() + 1).toString(36).toUpperCase() +
    d.getDate().toString(36).toUpperCase() +
    d.getHours().toString().padStart(2, '0') +
    d.getMinutes().toString().padStart(2, '0')
  );
}
</script>

</body>
</html>
